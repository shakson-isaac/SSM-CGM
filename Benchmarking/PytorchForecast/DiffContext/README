Any edits to the scripts need to be uploaded to GCS!!! BEFORE RUNNING
This folder has a mixture of models being ran with full context length or not.



For the scripts in this folder:
gcloud storage cp DeepAR288opt.py gs://cgmproject2025/scripts/sota/DeepAR288opt.py
gcloud storage cp DeepAR576opt.py gs://cgmproject2025/scripts/sota/DeepAR576opt.py
gcloud storage cp LSTMopt.py gs://cgmproject2025/scripts/sota/LSTMopt.py
gcloud storage cp NHITSopt.py gs://cgmproject2025/scripts/sota/NHITSopt.py

Then launch the yaml file to run on Google Cloud Batch:
gcloud batch jobs submit [INSERTNAME] \
  --project=cgmsy-467321 \
  --location=us-central1 \
  --config=[INSERTCONFIG].yaml

EXAMPLES:
----------------
gcloud batch jobs submit "deepar288opt-$(date +%Y%m%d-%H%M%S)" \
  --project=cgmsy-467321 \
  --location=us-central1 \
  --config=DeepAR288opt.yaml

  gcloud batch jobs submit "deepar576opt-$(date +%Y%m%d-%H%M%S)" \
  --project=cgmsy-467321 \
  --location=us-central1 \
  --config=DeepAR576opt.yaml

gcloud batch jobs submit "lstmopt-$(date +%Y%m%d-%H%M%S)" \
  --project=cgmsy-467321 \
  --location=us-central1 \
  --config=LSTMopt.yaml

gcloud batch jobs submit "nhitsopt-$(date +%Y%m%d-%H%M%S)" \
  --project=cgmsy-467321 \
  --location=us-central1 \
  --config=NHITSopt.yaml



-----------------
IMPORTANT 
[INSERTNAME] has to be unique name that has not been used int he batch job before (OR IT WILL ERROR)
[INSERTCONFIG] is the name of the yaml file you are running on google cloud batch with the configurations set

-----------------
ALL FILES should use:
train_finaltimeseries_meal.feather as the dataset
Quantile Loss: [0.1, 0.5, 0.9]

For Mamba1 and Mamba2 script the same hyperparameters were used to compare if CONTEXT LENGTH increases performance!!
For Mamba and TFT the same learning rate and batch size were used for comparison: lr = 1e-3, batch_size = 32. 
But other hyperparameters differed to optimize performance for each model.

WHEN RUNNING FILES MAKE SURE THE gcs_prefix is DIFFERENT FOR EACH FILE OR YOU END UP OVERWRITING THE CHECKPOINTS
gcs_prefix="checkpoints_mamba576_MESqmv2"
gcs_ckpt_prefix = "checkpoints_mamba576_MESqmv2"