taskGroups:
  - taskCount: 1
    taskSpec:
      maxRetryCount: 4
      computeResource:
        cpuMilli: 48000        # 48 vCPUs × 1000: 48000
        memoryMib: 348160      # 340 GB × 1024 MiB/GB: 348160 
      volumes:
        - gcs:
            remotePath: cgmproject2025/scripts/mamba
          mountPath: /mnt/disks/scripts
      runnables:
        - container:
            imageUri: us-central1-docker.pkg.dev/cgmsy-467321/cgm-base-env/gpu-base:latest
            entrypoint: "/opt/micromamba/envs/cgmenv/bin/python"
            commands:
              - "/mnt/disks/scripts/mamba2_288_mesv2.py"
allocationPolicy:
  instances:
    - policy:
        machineType: a2-highgpu-4g   #a2-highgpu-4g # 4x NVIDIA A100 GPUs
        provisioningModel: SPOT #SPOT   # makes it preemptible (cheaper)
        bootDisk:
          sizeGb: 300
      installGpuDrivers: true
      #installOpsAgent: true  #To Check Memory Usage
logsPolicy:
  destination: CLOUD_LOGGING